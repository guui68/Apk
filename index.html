<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeraBox Fast Downloader</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center p-6">
    <div class="w-full max-w-lg mt-10">
        <h1 class="text-3xl font-bold text-center text-blue-500 mb-8">TeraBox DL</h1>
        
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg">
            <input type="text" id="tUrl" placeholder="Paste link here..." class="w-full p-4 rounded bg-gray-700 mb-4 focus:outline-none border border-gray-600">
            <button onclick="getLink()" id="btn" class="w-full bg-blue-600 py-3 rounded font-bold hover:bg-blue-700">ফাইলটি দেখুন</button>
        </div>

        <div id="loader" class="hidden mt-6 text-center text-blue-400 animate-pulse">খোঁজা হচ্ছে...</div>

        <div id="result" class="hidden mt-8 p-4 bg-gray-800 rounded-xl border border-blue-500">
            <p id="name" class="mb-4 font-semibold text-sm truncate"></p>
            <video id="video" controls class="w-full rounded bg-black mb-4"></video>
            <a id="dl" href="#" target="_blank" class="block w-full bg-green-600 text-center py-3 rounded font-bold">ডাউনলোড করুন</a>
        </div>
    </div>

    <script>
        async function getLink() {
            const link = document.getElementById('tUrl').value.trim();
            const btn = document.getElementById('btn');
            const resDiv = document.getElementById('result');
            const loader = document.getElementById('loader');

            if(!link) return alert("লিঙ্ক দিন!");

            btn.disabled = true;
            loader.classList.remove('hidden');
            resDiv.classList.add('hidden');

            try {
                // আমরা এখানে সবথেকে সচল একটি পাবলিক এপিআই ব্যবহার করছি
                const response = await fetch(`https://terabox-dl.qtcloud.workers.dev/api/get-info?url=${encodeURIComponent(link)}`);
                const data = await response.json();

                if(data && data.list && data.list.length > 0) {
                    const file = data.list[0];
                    const finalUrl = file.download_urls['fast'] || file.download_urls['standard'];

                    document.getElementById('name').innerText = file.filename;
                    document.getElementById('video').src = finalUrl;
                    document.getElementById('dl').href = finalUrl;
                    
                    loader.classList.add('hidden');
                    resDiv.classList.remove('hidden');
                } else {
                    alert("লিঙ্কটি থেকে ভিডিও পাওয়া যায়নি। অন্য লিঙ্ক দিন।");
                }
            } catch (e) {
                alert("সার্ভার সমস্যা! ১ মিনিট পর আবার ট্রাই করুন।");
            } finally {
                btn.disabled = false;
                loader.classList.add('hidden');
            }
        }
    </script>
</body>
</html>
